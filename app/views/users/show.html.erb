<div class="mypage_main">
 <%# 見出し %>
 <div class="top_message">
   <%= @user.nickname %>さんのマイページ
 </div>

 <% if user_signed_in? && @user.id == current_user.id %>
  <%# ログイン情報 %>
  <div class="login_profile" >
   <h6 class="block_title">ログイン情報</h6>
   <table class="table table-light">
    <thead>
     <tr claas>
       <th scope="col">nickname</th>
       <th scope="col">email</th>
     </tr>
    </thead>
    <tbody>
     <tr>
       <td><%= @user.nickname %></td>
       <td><%= @user.email %></td>
     </tr>
    </tbody>
   </table>
  </div>

  <%# プロフィール情報 %>
  <div class="user_profile">
   <h6 class="block_title">プロフィール</h6>
   <% if @user.profile.nil? %>
    <h5 class="block_text">
     まだプロフィールが登録されていません。登録は<%= link_to "こちら", new_user_profile_path(@user.id), class:"profile_link"%>
    </h5>
   <% else %>
    <table class="table table-light">
     <thead>
      <tr claas>
       <th scope="col">性別</th>
       <th scope="col">家族構成</th>
       <th scope="col">味の好み</th>
       <th scope="col">アレルギー</th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td><%= @user.profile.gender.name %></td>
       <td><%= @user.profile.family_structure.name %></td>
       <td><%= @user.profile.taste.name %></td>
       <td>
        <% if @allergies.empty? %>
         登録なし
        <% else %>
         <%= @material.name %>
        <% end %>
       </td>
      </tr>
    </tbody>
   </table>
   <% end %>
  </div>

  <%# プレゼント申込履歴 %>
  <div class="present_application">
   <h6 class="block_title">プレゼント申込履歴</h6>
   <% if @user.present_orders.empty? %>
    <h5 class="block_text">
     投稿したレシピの数に応じてプレゼントがもらえます！申し込みは<%= link_to "こちら", new_user_present_order_path(@user.id), class:"present_link"%>
    </h5>
   <% else %>
    <table class="table table-light">
     <thead>
      <tr claas>
       <th scope="col">申し込み日時</th>
       <th scope="col">商品名</th>
      </tr>
     </thead>
     <tbody>
      <% @user.present_orders.each do |order| %>
      <tr>
       <td><%= l order.created_at %></td>
       <td><%= (Present.find(order.present_id)).name %></td>
      </tr>
      <% end %>
    </tbody>
   </table>
    <h5 class="block_text">
     プレゼントの申し込みは<%= link_to "こちら", new_user_present_order_path(@user.id), class:"present_link"%>
    </h5>
   <% end %>
  </div>

  <%# クリップ一覧 %>
  <div class="clip_index">
   <h6 class="block_title">クリップしたレシピ</h6>
  </div>
  <% unless @clip_recipes.empty? %>
   <div class="recipes_content">
    <%= render partial: "shared/recipe_container", locals: { recipes: @clip_recipes } %>
   </div>
  <% else %>
   <h5 class="block_text">
    まだclipしたレシピはありません。
   </h5> 
  <% end%>
 <% end %>

 <%# 投稿一覧 %>
  <div class="recipe_index">
   <h6 class="block_title">投稿したレシピ</h6>
  </div>
  <% unless @user.recipes.empty? %>
   <div class="recipes_content">
    <%= render partial: "shared/recipe_container", locals: { recipes: @user.recipes } %>
   </div>
  <% else %>
   <h5 class="block_text">
    まだ投稿したレシピはありません。
   </h5> 
  <% end%>
</div>