<div class="mypage_main">
 <%# 見出し %>
 <div class="top_message">
   <%= @user.nickname %>さんのマイページ
 </div>

 <%# フォロー情報 %>
 <div class="follow_information" id="follow_information">
 <% if user_signed_in? %>
  <% if @user.id == current_user.id %>
    <div>
     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
     <path d="M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828l.645-1.937zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.734 1.734 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.734 1.734 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.734 1.734 0 0 0 3.407 2.31l.387-1.162zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L10.863.1z"/>
     </svg>
    </div>
    <div class="follow_count"><%= link_to @followees.length, user_follows_path(@user), class: "follow_count_link" %>フォロー中</div>
    <div class="follower_count"><%= @followers.length %>フォロワー</div>
  <% else %>
    <% if @follow_flg.zero? %>
    <div type="submit" id="follow_btn">
     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
      <path id="follow_mark_path" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
     </svg>
    </div>
    <% else%>
    <div>
     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
     <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
     </svg>
    </div>
    <% end %>
    <div class="follower_count" id="follower_count"><%= @followers.length %>フォロワー</div>
  <% end %>  
 <% else %>
   <div>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
     <path d="M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828l.645-1.937zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.734 1.734 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.734 1.734 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.734 1.734 0 0 0 3.407 2.31l.387-1.162zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L10.863.1z"/>
    </svg>
   </div>
   <div class="follower_count"><%= @followers.length %>フォロワー</div>
 <% end %> 
 </div>


 <% if user_signed_in? && @user.id == current_user.id %>
  <%# ログイン情報 %>
  <div class="login_profile" >
   <h6 class="block_title">ログイン情報</h6>
   <table class="table table-light">
    <thead>
     <tr claas>
       <th scope="col">nickname</th>
       <th scope="col">email</th>
     </tr>
    </thead>
    <tbody>
     <tr>
       <td><%= @user.nickname %></td>
       <td><%= @user.email %></td>
     </tr>
    </tbody>
   </table>
  </div>

  <%# プロフィール情報 %>
  <div class="user_profile">
   <h6 class="block_title">プロフィール</h6>
   <% if @user.profile.nil? %>
    <h5 class="block_text">
     まだプロフィールが登録されていません。登録は<%= link_to "こちら", new_user_profile_path(@user.id), class:"profile_link"%>
    </h5>
   <% else %>
    <table class="table table-light">
     <thead>
      <tr claas>
       <th scope="col">性別</th>
       <th scope="col">家族構成</th>
       <th scope="col">味の好み</th>
       <th scope="col">アレルギー</th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td><%= @user.profile.gender.name %></td>
       <td><%= @user.profile.family_structure.name %></td>
       <td><%= @user.profile.taste.name %></td>
       <td>
        <% if @allergies.empty? %>
         登録なし
        <% else %>
         <%= @material.name %>
        <% end %>
       </td>
      </tr>
    </tbody>
   </table>
   <% end %>
  </div>

  <%# プレゼント申込履歴 %>
  <div class="present_application">
   <h6 class="block_title">プレゼント申込履歴</h6>
   <% if @user.present_orders.empty? %>
    <h5 class="block_text">
     投稿したレシピの数に応じてプレゼントがもらえます！申し込みは<%= link_to "こちら", new_user_present_order_path(@user.id), class:"present_link"%>
    </h5>
   <% else %>
    <table class="table table-light">
     <thead>
      <tr claas>
       <th scope="col">申し込み日時</th>
       <th scope="col">商品名</th>
      </tr>
     </thead>
     <tbody>
      <% @user.present_orders.each do |order| %>
      <tr>
       <td><%= l order.created_at %></td>
       <td><%= (Present.find(order.present_id)).name %></td>
      </tr>
      <% end %>
    </tbody>
   </table>
    <h5 class="block_text">
     プレゼントの申し込みは<%= link_to "こちら", new_user_present_order_path(@user.id), class:"present_link"%>
    </h5>
   <% end %>
  </div>

  <%# クリップ一覧 %>
  <div class="clip_index">
   <h6 class="block_title">クリップしたレシピ</h6>
  </div>
  <% unless @clip_recipes.empty? %>
   <div class="recipes_content">
    <%= render partial: "shared/recipe_container", locals: { recipes: @clip_recipes } %>
   </div>
  <% else %>
   <h5 class="block_text">
    まだクリップしたレシピはありません。
   </h5> 
  <% end%>
 <% end %>

 <%# 投稿一覧 %>
  <div class="recipe_index">
   <h6 class="block_title">投稿したレシピ</h6>
  </div>
  <% unless @user.recipes.empty? %>
   <div class="recipes_content">
    <%= render partial: "shared/recipe_container", locals: { recipes: @user.recipes } %>
   </div>
  <% else %>
   <h5 class="block_text">
    まだ投稿したレシピはありません。
   </h5> 
  <% end%>
</div>